<article class="commerce-card" [class.commerce-card--list]="viewMode === 'list'">
  <ng-container [ngSwitch]="viewMode">
    <a
      *ngSwitchCase="'grid'"
      class="commerce-card__link"
      [href]="commerce.mapsUrl"
      target="_blank"
      rel="noopener noreferrer"
    >
      <div class="commerce-card__image">
        <img
          [src]="commerce.img"
          [alt]="commerce.name"
          loading="lazy"
          (error)="onImageError($event)"
        />
      </div>
      <div class="commerce-card__body">
        <header>
          <p class="commerce-card__label" aria-hidden="true">{{ 'card.labels.commerce' | translate }}</p>
          <h3 class="commerce-card__title" [title]="commerce.name">{{ commerce.name }}</h3>
          <p class="commerce-card__sector" [title]="commerce.sector">{{ commerce.sector }}</p>
        </header>
        <dl class="commerce-card__meta">
          <div class="commerce-card__meta-item" *ngIf="commerce.phone">
            <dt [attr.aria-label]="'card.labels.phone' | translate">{{ 'card.labels.phone' | translate }}</dt>
            <dd>
              <a class="commerce-card__meta-link" [href]="'tel:' + commerce.phone">
                {{ commerce.phone }}
              </a>
            </dd>
          </div>
          <div class="commerce-card__meta-item">
            <dt [attr.aria-label]="'card.labels.address' | translate">{{ 'card.labels.address' | translate }}</dt>
            <dd [title]="commerce.address">{{ commerce.address }}</dd>
          </div>
        </dl>
      </div>
    </a>

    <a
      *ngSwitchCase="'list'"
      class="commerce-card__row"
      [href]="commerce.mapsUrl"
      target="_blank"
      rel="noopener noreferrer"
    >
      <div class="commerce-card__row-cell commerce-card__row-cell--commerce">
        <div class="commerce-card__row-media">
          <img
            [src]="commerce.img"
            [alt]="commerce.name"
            loading="lazy"
            (error)="onImageError($event)"
          />
        </div>
        <div class="commerce-card__row-main">
          <span class="commerce-card__row-heading">{{ 'card.labels.commerce' | translate }}</span>
          <h3 class="commerce-card__row-title" [title]="commerce.name">{{ commerce.name }}</h3>
        </div>
      </div>

      <div class="commerce-card__row-cell" [attr.data-label]="'card.labels.sector' | translate">
        <span class="commerce-card__row-heading">{{ 'card.labels.sector' | translate }}</span>
        <p class="commerce-card__row-text" [title]="commerce.sector">{{ commerce.sector }}</p>
      </div>

      <div class="commerce-card__row-cell" [attr.data-label]="'card.labels.address' | translate">
        <span class="commerce-card__row-heading">{{ 'card.labels.address' | translate }}</span>
        <p class="commerce-card__row-text" [title]="commerce.address">{{ commerce.address }}</p>
      </div>

      <div class="commerce-card__row-cell" [attr.data-label]="'card.labels.phone' | translate">
        <span class="commerce-card__row-heading">{{ 'card.labels.phone' | translate }}</span>
        <ng-container *ngIf="commerce.phone; else noPhone">
          <a class="commerce-card__row-link" [href]="'tel:' + commerce.phone">{{ commerce.phone }}</a>
        </ng-container>
        <ng-template #noPhone>
          <span class="commerce-card__row-muted">{{ 'card.labels.phoneUnavailable' | translate }}</span>
        </ng-template>
      </div>
    </a>
  </ng-container>
</article>
